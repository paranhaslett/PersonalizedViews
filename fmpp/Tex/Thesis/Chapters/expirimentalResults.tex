
\chapter{Experimental Results}

\section{Purpose}
The purpose of this expiriment is to establish if there are superficial changes in curently working projects.  By superficial we mean that the change does not add much of value apart from personal taste or formating.  In some cases cahnges to the order of methods within a class does change the behaviour of a program, this is an example of a superficial change.  It is harder to determine if comments are superficial because certain comments could be important to others and others irrelivant. We will attempt to establish if there are any patterns in comments to determine if they are superfical or not.  Determining if there are superficial change may indicate that there is a seperation between personal preferences that would be best contained in a private view and items that need to be shared for collaboration.

\section{Methodology}
\subsection{Setup}
The expiriment was run on a lenovo laptap with 3.5 Ram and 113.2 GB disk space assigned to the 64 bit Ubuntu 13.10 (Saucy Salamander) operating system.
  

The tests were written in Java and run within the eclipse editor.

We had some garbage collection memory issues with some of the baselines that we were testing. To resolve these isseue we increased the memory by changing the parameters for the run configuration.  The following parameters were added to the run configuration for the test.

\begin{verbatim}
-Xms512M 
-Xmx4096M
\end{verbatim}

Each of the benchmarks were tested individually to further ensure that there were no memory issues. 

The Refactor Categories Tool was run individiually once for each benchmark.  The Refactor Categories Tool analyses all the historical changes ever made on a software project by extracting successive revisions from a Git repository using JGit.

\subsection{Benchmarks Examained}
 The expirment was run over a number of benchmarks with different numbers of commits.
 
  \begin{itemize}
  \item Jasm
  this a a Java bytecode assembler written for use with the Whiley programming language.
  
  https://github.com/Whiley/Jasm
  
  74 commits 3 branches
  
  \item Jpp
  
  this is a preproccessor for Java based on Bash shell script. 
  
  https://github.com/maandree/jpp
  
  40 commits 2 branches
  
  \item AST Java
  
  a small parser wriiten to transform Java into an AST. 
  
  https://github.com/klangner/ast-java
  
  24 commits 1 branch
  
  \item Java Object Diff
  
  allows two Java objects to be compared 
  
  https://github.com/SQiShER/java-object-diff
  
  291 commits 2 branches
  
  \item DiffJ
  
  a diff tool which in addition to ignoring white space ignores changes of ordering in package names for a Java file 
  
  https://github.com/jpace/diffj
  
  490 commits 2 branches

  \item  IRE
  
  a java library for regular expression matching
  
  https://github.com/jkff/ire
  
  41 commits 1 branch
  
  \item syntax
  
  a compiler compiler used for teaching
  
  https://github.com/jaimegarza/syntax
  
  89 commits 1 branch
    
\end{itemize}




\section{Results}
\subsection{Overview}
The results for the "Jasm" benchmark are as follows: 

\begin{table}[H]
    \begin{tabular}{llll}
    Code Segment Format & Type of Operation & Detected by JGit & Detected by RCT \\ \hline
    Comments            & Delete            & N/A              & 7               \\
    ~                   & Insert            & N/A              & 6               \\
    ~                   & Modify            & N/A              & 95              \\
    White space         & Modify            & N/A              & 26              \\
    Java                & Delete            & 91               & 264             \\
    ~                   & Insert            & 44               & 76              \\
    ~                   & Modify            & 337              & 385             \\
    ~                   & Move              & N/A              & 7               \\
    ~                   & Renamed           & N/A              & 0               \\
    ~                   & Equivalent        & N/A              & 0               \\
    \end{tabular}
\end{table}

The results for the "Jpp" benchmark are as follows: 

\begin{table}[H]
    \begin{tabular}{llll}
    Code Segment Format & Type of Operation & Detected by JGit & Detected by RCT \\ \hline
    Comments            & Delete            & N/A              & 1               \\
    ~                   & Insert            & N/A              & 2               \\
    ~                   & Modify            & N/A              & 11              \\
    White space         & Modify            & N/A              & 6               \\
    Java                & Delete            & 23               & 43              \\
    ~                   & Insert            & 3                & 9               \\
    ~                   & Modify            & 41               & 50              \\
    ~                   & Move              & N/A              & 0               \\
    ~                   & Renamed           & N/A              & 0               \\
    ~                   & Equivalent        & N/A              & 0               \\
    \end{tabular}
\end{table}

The results for the "AST java" Bench mark are as follows:

\begin{table}[H]
    \begin{tabular}{llll}
    Code Segment Format & Type of Operation & Detected by JGit & Detected by RCT \\ \hline
    Comments            & Delete            & N/A              & 2               \\
    ~                   & Insert            & N/A              & 0               \\
    ~                   & Modify            & N/A              & 22              \\
    White space         & Modify            & N/A              & 5               \\
    Java                & Delete            & 44               & 87              \\
    ~                   & Insert            & 15               & 28              \\
    ~                   & Modify            & 85               & 72              \\ 
    ~                   & Move              & N/A              & 1               \\
    ~                   & Renamed           & N/A              & 0               \\
    ~                   & Equivalent        & N/A              & 11              \\
    \end{tabular}
\end{table}

The results for the "Java object diff" Bench mark are as follows:

\begin{table}[H]
    \begin{tabular}{llll}
    Code Segment Format & Type of Operation & Detected by JGit & Detected by RCT \\ \hline
    Comments            & Delete            & N/A              & 14              \\
    ~                   & Insert            & N/A              & 39              \\
    ~                   & Modify            & N/A              & 1438            \\
    White space         & Modify            & N/A              & 277             \\
    Java                & Delete            & 1186             & 2645            \\
    ~                   & Insert            & 837              & 1961            \\
    ~                   & Modify            & 8219             & 8862            \\
    ~                   & Move              & N/A              & 5               \\
    ~                   & Renamed           & N/A              & 9               \\
    ~                   & Equivalent        & N/A              & 183             \\
    \end{tabular}
\end{table}

The results for the "DiffJ" benchmark are as follows

\begin{table}[H]
    \begin{tabular}{llll}
    Code Segment Format & Type of Operation & Detected by JGit & Detected by RCT \\ \hline
    Comments            & Delete            & N/A              & 36              \\
    ~                   & Insert            & N/A              & 39              \\
    ~                   & Modify            & N/A              & 281             \\
    White space         & Modify            & N/A              & 276             \\
    Java                & Delete            & 746              & 3106            \\
    ~                   & Insert            & 991              & 3164            \\
    ~                   & Modify            & 3544             & 5192            \\
    ~                   & Move              & N/A              & 58              \\
    ~                   & Renamed           & N/A              & 82              \\
    ~                   & Equivalent        & N/A              & 18              \\
    \end{tabular}
\end{table}

The results for the "IRE" benchmark are as follows:

\begin{table}[H]
    \begin{tabular}{llll}
    Code Segment Format & Type of Operation & Detected by JGit & Detected by RCT \\ \hline
    Comments            & Delete            & N/A              & 10              \\
    ~                   & Insert            & N/A              & 3               \\
    ~                   & Modify            & N/A              & 79              \\
    White space         & Modify            & N/A              & 49              \\
    Java                & Delete            & 112              & 263             \\
    ~                   & Insert            & 49               & 213             \\
    ~                   & Modify            & 465              & 640             \\
    ~                   & Move              & N/A              & 1               \\
    ~                   & Renamed           & N/A              & 2               \\
    ~                   & Equivalent        & N/A              & 30              \\
    \end{tabular}
\end{table}


The results for the "Syntax" benchmark are as follows:

\begin{table}[H]
    \begin{tabular}{llll}
    Code Segment Format & Type of Operation & Detected by JGit & Detected by RCT \\ \hline
    Comments               & Delete            & N/A              & 14                                   \\
    ~                      & Insert            & N/A              & 81                                   \\
    ~                      & Modify            & N/A              & 451                                  \\
    White space            & Modify            & N/A              & 204                                  \\
    Java                   & Delete            & 691              & 1142                                 \\
    ~                      & Insert            & 214              & 544                                  \\
    ~                      & Modify            & 1863             & 2216                                 \\
    ~                      & Move              & N/A              & 6                                    \\
    ~                      & Renamed           & N/A              & 7                                    \\
    ~                      & Equivalent        & N/A              & 12                                   \\
    \end{tabular}
\end{table}
\subsection{Discussion}

The data sets following are complete git repositories which have been examined to discover the proportion of changes to behavior compared to ascetic changes that do not affect the behaviour of the program. 

% in table ~\ref{tab:DataSets}
% 
% \begin{table}
%   \caption{Complete git repositories that are tested}
%   \label{tab:DataSets}
%   \begin{center}
%     \begin{tabular}{|c|c|c|}
%        Jasm & this a a Java bytecode assembler
%        written for use with the Whiley programming language. & 
% https://github.com/Whiley/Jasm\\
%       foo & bar \\
%     \end{tabular}
%   \end{center}
% \end{table}
% 

% 
% 
% 
% There are a number of Java categories that the Refactor Categories Tool will 
% recognise.  Apart from the traditional insert, delete and modify it will 
% aslo recogise if an Ast Node has been renamed but the content and type of 
% the node remains the same.  It will recognise valid moves within a scope. It 
% will also recognise when the text based merge got it wrong by claiming that 
% the code was not fuctionally equivalent when in fact it was.
% 
% Apart from this it will also diferentiate between Java code and comments.  
% It can tell if comments have been inserted, modified, moved or deleted.  It 
% will also pick up any changes to that whitespace that have not already been 
% figured out by the text based comparison.
 
% Comments
%     Insert
%     Delete
%     Modify
%     Move
% White space
%    Modify
% 
% Java
%  Insert
%  Delete
%  Modify
%  Move
%  Rename


% need the results in here
% 
% 
% what this means
% modifications to comments
% 
% modification to comments could be surplus to need
% 
% 
% Examine certain events
% 
% in this case the comment is removed but as the comment is associated with a 
% functional change the comment also needs to change in both versions



